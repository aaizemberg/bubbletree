var ChequeadoBubbleTree;!function(e,r,a,t){"use strict";HTMLDivElement.prototype.remove=function(){},ChequeadoBubbleTree=e.ChequeadoBubbleTree=e.ChequeadoBubbleTree||{},ChequeadoBubbleTree.RAW_DATA=[],ChequeadoBubbleTree.init=function(){var e=ChequeadoBubbleTree.getParam("key");if(e)try{Tabletop.init({key:e,callback:function(e,r){ChequeadoBubbleTree.prepareData(e)},parseNumbers:!0})}catch(r){alert("Error al leer la planilla: "+r.message)}else alert('Falta el parÃ¡metro "key" en la url.')},ChequeadoBubbleTree.prepareData=function(e){console.log(e),ChequeadoBubbleTree.RAW_DATA=e.DATA.elements;var r={data:{href:function(e){return this.data},html:function(e){return"En Spreadsheet"}}};a(".modal").render(e.CREDITS.elements[0],r);var l=ChequeadoBubbleTree.RAW_DATA[0];l.children=t.filter(ChequeadoBubbleTree.RAW_DATA,{parent:l.id}),ChequeadoBubbleTree.completeChildren(l.children),ChequeadoBubbleTree.render(l)},ChequeadoBubbleTree.completeChildren=function(e){t.each(e,function(e){console.log(e.id),e.children=t.filter(ChequeadoBubbleTree.RAW_DATA,{parent:e.id}),e.children.length>0&&ChequeadoBubbleTree.completeChildren(e.children)})},ChequeadoBubbleTree.render=function(e){console.log(e),new BubbleTree({data:e,container:".bubbletree"}),setTimeout(function(){a("#loader-container").fadeOut(),a("#button-container").fadeIn(),a(".bubbletree").addClass("loaded")},1500)},ChequeadoBubbleTree.initGenerador=function(){a("#test").on("click",function(){var e=a("#sheet").val(),r=a("#height").val();if(e&&r){var t=location.origin+location.pathname+"viz.html?key="+e;a("iframe").attr("src",t).attr("height",r),a("textarea").html('<iframe src="'+t+'" frameborder="0" height="'+r+'" width="100%"></iframe>')}else alert("Debe completar los campos!")})},ChequeadoBubbleTree.getParam=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=r.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}}(window,document,jQuery,_);
var ChequeadoBubbleTree;!function(e,r,a,l){"use strict";HTMLDivElement.prototype.remove=function(){},ChequeadoBubbleTree=e.ChequeadoBubbleTree=e.ChequeadoBubbleTree||{},ChequeadoBubbleTree.RAW_DATA=[],ChequeadoBubbleTree.init=function(){var e=ChequeadoBubbleTree.getParam("key");if(e)try{Tabletop.init({key:e,callback:function(e,r){ChequeadoBubbleTree.prepareData(e)},parseNumbers:!0,simpleSheet:!0})}catch(r){alert("Error al leer la planilla: "+r.message)}else alert('Falta el parÃ¡metro "key" en la url.')},ChequeadoBubbleTree.prepareData=function(e){ChequeadoBubbleTree.RAW_DATA=e;var r=ChequeadoBubbleTree.RAW_DATA[0];r.children=l.filter(ChequeadoBubbleTree.RAW_DATA,{parent:r.id}),ChequeadoBubbleTree.completeChildren(r.children),ChequeadoBubbleTree.render(r)},ChequeadoBubbleTree.completeChildren=function(e){l.each(e,function(e){console.log(e.id),e.children=l.filter(ChequeadoBubbleTree.RAW_DATA,{parent:e.id}),e.children.length>0&&ChequeadoBubbleTree.completeChildren(e.children)})},ChequeadoBubbleTree.render=function(e){console.log(e),new BubbleTree({data:e,container:".bubbletree"})},ChequeadoBubbleTree.initGenerador=function(){a("#test").on("click",function(){var e=a("#sheet").val(),r=a("#height").val();if(e&&r){var l=location.origin+location.pathname+"viz.html?key="+e;a("iframe").attr("src",l).attr("height",r),a("textarea").html('<iframe src="'+l+'" frameborder="0" height="'+r+'" width="100%"></iframe>')}else alert("Debe completar los campos!")})},ChequeadoBubbleTree.getParam=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=r.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}}(window,document,jQuery,_);